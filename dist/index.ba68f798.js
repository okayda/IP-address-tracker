function t(t,e,n,o){Object.defineProperty(t,e,{get:n,set:o,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},a={},r=n.parcelRequire1541;null==r&&((r=function(t){if(t in o)return o[t].exports;if(t in a){var e=a[t];delete a[t];var n={id:t,exports:{}};return o[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){a[t]=e},n.parcelRequire1541=r),r.register("27Lyk",(function(e,n){var o,a;t(e.exports,"register",(()=>o),(t=>o=t)),t(e.exports,"resolve",(()=>a),(t=>a=t));var r={};o=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)r[e[n]]=t[e[n]]},a=function(t){var e=r[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),r("27Lyk").register(JSON.parse('{"jRPZQ":"index.ba68f798.js","d4CMP":"icon-location.c6b5a81e.svg"}'));var i;i=new URL(r("27Lyk").resolve("d4CMP"),import.meta.url).toString();new class{#t=L.map("map").setView([0,0],0);#e=document.querySelector(".main-form");#n=document.querySelector(".address-info-container");#o=document.querySelector(".error-message-container");#a=document.querySelector(".info-container");#r=document.querySelector(".error-message");constructor(){this._load_map(this.#t),this._load_location_data(),this._init_form_handler()}_load_map(t){L.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(t)}_load_location_map(t,{lat:n,lng:o}={lat:51.5,lng:10.09},a){t.setView([n,o],12),L.marker([n,o],{icon:L.icon({iconUrl:e(i),iconSize:[35,40]})}).addTo(t).bindPopup(L.popup({offset:[0,-15],autoClose:!1,closeOnClick:!1})).setPopupContent(`route (${a}) located here `).openPopup()}_display_error_message(t){this.#n.classList.remove("active"),this.#o.classList.add("active"),this.#r.textContent=t}_clear(){this.#a.innerHTML=""}async _get_my_IP(){try{const t=await fetch("https://api.ipify.org?format=json");if(!t.ok)throw new Error(`can't get your IP Address (${t.status})`);const{ip:e}=await t.json();return document.getElementById("address-input").value=e,e}catch(t){throw t}}async _get_res_data(t){try{const e=t??await this._get_my_IP(),n=await fetch((t=>`https://geo.ipify.org/api/v2/country,city?apiKey=at_M8T0QaTcLNBS3u4PQZwHGam7ZvNJ4&ipAddress=${t}`)(e));if(!n.ok)throw new Error(`${n.statusText} (${n.status})`);return await n.json()}catch(t){throw t}}async _get_route_location(t){try{const e=(await this._get_res_data(t)).as.route.split(/[./]/);return e.slice(0,4).join(".")}catch(t){throw t}}async _load_location_data(t){try{const e=await this._get_route_location(t),n=await this._get_res_data(e);this._load_location_map(this.#t,{lat:n.location.lat,lng:n.location.lng},e),this._clear(),this.#n.classList.add("active"),this.#a.insertAdjacentHTML("beforeend",function(t){return`\n <div class="content">\n              <p class="title">IP ADDRESS</p>\n              <h2 class="title-content">${t.ip}</h2>\n            </div>\n            <div class="content">\n              <p class="title">LOCATION</p>\n              <h2 class="title-content">${t.location.city}, ${t.location.region}, ${t.location.postalCode}</h2>\n            </div>\n            <div class="content">\n              <p class="title">TIMEZONE</p>\n              <h2 class="title-content">UTC${t.location.timezone}</h2>\n            </div>\n            <div class="content">\n              <p class="title">ISP</p>\n              <h2 class="title-content">${t.isp}</h2>\n            </div>\n    `}(n))}catch(t){this._display_error_message(t.message)}}_init_form_handler(){this.#e.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("address-input").value;4===e.split(".").filter((t=>+t)).length?(this.#o.classList.remove("active"),this._load_location_data(e)):this._display_error_message("Make sure your input value is an IP Address not domain")}))}};
//# sourceMappingURL=index.ba68f798.js.map
