new class{#t=L.map("map").setView([0,0],0);#e=document.querySelector(".main-form");#a=document.querySelector(".address-info-container");#n=document.querySelector(".error-message-container");#o=document.querySelector(".info-container");#s=document.querySelector(".error-message");constructor(){this._load_map(this.#t),this._load_location_data(),this._init_form_handler()}_load_map(t){L.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(t)}_load_location_map(t,{lat:e,lng:a}={lat:51.5,lng:10.09},n){t.setView([e,a],12),L.marker([e,a],{icon:L.icon({iconUrl:"images/icon-location.svg",iconSize:[35,40]})}).addTo(t).bindPopup(L.popup({offset:[0,-15],autoClose:!1,closeOnClick:!1})).setPopupContent(`route (${n}) located here `).openPopup()}_display_error_message(t){this.#a.classList.remove("active"),this.#n.classList.add("active"),this.#s.textContent=t}_clear(){this.#o.innerHTML=""}async _get_my_IP(){try{const t=await fetch("https://api.ipify.org?format=json");if(!t.ok)throw new Error(`can't get your IP Address (${t.status})`);const{ip:e}=await t.json();return document.getElementById("address-input").value=e,e}catch(t){throw t}}async _get_res_data(t){try{const e=t??await this._get_my_IP(),a=await fetch((t=>`https://geo.ipify.org/api/v2/country,city?apiKey=at_M8T0QaTcLNBS3u4PQZwHGam7ZvNJ4&ipAddress=${t}`)(e));if(!a.ok)throw new Error(`${a.statusText} (${a.status})`);return await a.json()}catch(t){throw t}}async _get_route_location(t){try{const e=(await this._get_res_data(t)).as.route.split(/[./]/);return e.slice(0,4).join(".")}catch(t){throw t}}async _load_location_data(t){try{const e=await this._get_route_location(t),a=await this._get_res_data(e);this._load_location_map(this.#t,{lat:a.location.lat,lng:a.location.lng},e),this._clear(),this.#a.classList.add("active"),this.#o.insertAdjacentHTML("beforeend",function(t){return`\n <div class="content">\n              <p class="title">IP ADDRESS</p>\n              <h2 class="title-content">${t.ip}</h2>\n            </div>\n            <div class="content">\n              <p class="title">LOCATION</p>\n              <h2 class="title-content">${t.location.city}, ${t.location.region}, ${t.location.postalCode}</h2>\n            </div>\n            <div class="content">\n              <p class="title">TIMEZONE</p>\n              <h2 class="title-content">UTC${t.location.timezone}</h2>\n            </div>\n            <div class="content">\n              <p class="title">ISP</p>\n              <h2 class="title-content">${t.isp}</h2>\n            </div>\n    `}(a))}catch(t){this._display_error_message(t.message)}}_init_form_handler(){this.#e.addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("address-input").value;4===e.split(".").filter((t=>+t)).length?(this.#n.classList.remove("active"),this._load_location_data(e)):this._display_error_message("Make sure your input value is an IP Address not domain")}))}};
//# sourceMappingURL=index.22e09c45.js.map
